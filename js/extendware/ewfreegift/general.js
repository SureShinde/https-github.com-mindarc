var EWFreeGift=Class.create({rewritePage:function(){if($("ewfg-overlay")&&$("ewfg-container")){$$("a.ewfg-link").each(function(a){a.stopObserving().observe("click",function(a){this.show()}.bind(this))}.bind(this));$("ewfg-close").stopObserving().observe("click",function(a){$("ewfg-overlay").fade();a.stop()});$$("#ewfg-gifts-grid form").each(function(a){var b=new Validation(a);a.down(".button.add").stopObserving().observe("click",function(a){b.validate()&&this.up("form").submit()})});$("ewfg-overlay").show();
var b=$$("#.ewfg-gifts-grid > li"),d=0;b.each(function(a){d<a.getHeight()&&(d=a.getHeight())});b.each(function(a){a.setStyle({height:d+"px"})});b=b.first().getWidth()*b.size();$("ewfg-gifts-grid").setStyle({width:b+"px"});if(0<$$("div.col-main").size()){var e=$$("div.col-main").first().getWidth(),c=e;e>b&&(c=b);c>$(document).viewport.getWidth()-30&&(c=$(document).viewport.getWidth()-30);$("ewfg-gifts").setStyle({"max-width":c+"px"})}$("ewfg-overlay").hide()}},show:function(){$("ewfg-overlay").visible()||
($("ewfg-overlay").show(),$("ewfg-container").style.top=$(document).viewport.getHeight()/2-$("ewfg-container").clientHeight/2+"px",$("ewfg-overlay").hide().appear())}}),EWFreeGiftTrigger=function(){ewfreegift=new EWFreeGift;ewfreegift.rewritePage()};Event.observe(document,"dom:loaded",EWFreeGiftTrigger);